<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Sprøde ristede kikærter – sund snack med højt proteinindhold</title>
  <meta name="description" content="Sprøde ristede kikærter – nem og sund snack med højt proteinindhold. Kan laves i ovn eller airfryer. Inkl. næringsindhold (kcal, protein, kulhydrat, fedt), tips, smagsvarianter og opbevaring." />
  <link rel="canonical" href="https://www.sund-snack.dk/opskrifter/sproede-ristede-kikaerter.html" />

  <meta property="og:title" content="Sprøde ristede kikærter – sund snack med højt proteinindhold" />
  <meta property="og:description" content="Sprøde kikærter med krydderier – sundt alternativ til chips. Laves nemt i ovn eller airfryer. Perfekt til snack, madpakke og filmhygge." />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://www.sund-snack.dk/opskrifter/sproede-ristede-kikaerter.html" />
  <!-- og:image bliver sat dynamisk til opskriftens billede via JS (fallback til hero) -->
  <meta property="og:image" content="https://www.sund-snack.dk/assets/images/hero.jpg" />

  <meta name="theme-color" content="#16a34a" />
  <link rel="stylesheet" href="/assets/styles.css" />
  <script src="/assets/site.js" defer></script>

  <!-- Recipe schema bliver injiceret korrekt med rigtigt billede + nutrition fra opskrifter.json -->
  <script id="recipeSchema" type="application/ld+json">{}</script>

  <style>
    .container{width:min(1100px, calc(100% - 2rem));margin:0 auto}

    .recipe{padding:22px 0 56px}

    .recipe-head{display:flex;flex-direction:column;gap:10px;margin-bottom:16px}
    .recipe-title{margin:0;font-size:clamp(1.9rem,3.2vw,2.6rem);font-weight:900;letter-spacing:-.02em}
    .recipe-sub{margin:0;color:rgba(11,18,32,.72);font-weight:600;max-width:78ch}

    /* top layout with image left */
    .recipe-top{
      display:grid;
      grid-template-columns: 1fr 1.05fr;
      gap:18px;
      align-items:start;
      margin-top:14px;
    }
    @media (max-width:980px){.recipe-top{grid-template-columns:1fr}}

    .recipe-photo{
      border-radius:22px;
      overflow:hidden;
      border:1px solid rgba(11,18,32,.10);
      box-shadow:0 18px 60px rgba(11,18,32,.10);
      background:#fff;
    }
    .recipe-photo img{width:100%;height:420px;object-fit:cover;display:block}
    @media (max-width:980px){.recipe-photo img{height:300px}}

    .cardx{
      background:#fff;
      border:1px solid rgba(11,18,32,.10);
      border-radius:18px;
      box-shadow:0 8px 22px rgba(11,18,32,.08);
      padding:16px;
    }
    .cardx h2,.cardx h3{margin:0 0 10px;font-size:1.1rem;font-weight:950;letter-spacing:-.01em}
    .cardx p{margin:0 0 10px;color:rgba(11,18,32,.75);font-weight:600}
    .list{margin:0;padding-left:18px;color:rgba(11,18,32,.78);font-weight:650}
    .list li{margin:8px 0}

    .meta-pills{display:flex;flex-wrap:wrap;gap:10px;margin:0 0 10px}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:.48rem .75rem;border-radius:999px;border:1px solid rgba(11,18,32,.12);background:rgba(11,18,32,.03);font-weight:900}

    /* Save button with RED filled heart */
    .save-btn{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:.68rem .95rem;
      border-radius:999px;
      border:1px solid rgba(11,18,32,.12);
      background:#fff;
      font-weight:900;
      cursor:pointer;
      user-select:none;
      transition:transform .08s ease, background .15s ease, border-color .15s ease;
    }
    .save-btn:active{transform:scale(.98)}
    .save-btn .heart{width:18px;height:18px;display:inline-block}
    .save-btn .heart path{
      fill:transparent;
      stroke:currentColor;
      stroke-width:2;
      transition:fill .15s ease, stroke .15s ease;
    }
    .save-btn.is-saved{
      border-color:rgba(220,38,38,.30);
      background:rgba(220,38,38,.07);
      color:#b91c1c;
    }
    .save-btn.is-saved .heart path{
      fill:#ef4444;
      stroke:#ef4444;
    }

    .nutri{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px}
    .nutri .pill{justify-content:space-between;width:100%}

    .related-wrap{margin-top:22px}
    .related-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:12px}
    @media (max-width:980px){.related-grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:640px){.related-grid{grid-template-columns:1fr}}
    .mini-card{background:#fff;border:1px solid rgba(11,18,32,.10);border-radius:18px;overflow:hidden;box-shadow:0 6px 18px rgba(11,18,32,.08);transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease}
    .mini-card:hover{transform:translateY(-2px);border-color:rgba(22,163,74,.25);box-shadow:0 14px 34px rgba(11,18,32,.10)}
    .mini-thumb{height:140px;background-size:cover;background-position:center;background-color:rgba(11,18,32,.05)}
    .mini-body{padding:12px}
    .mini-title{margin:0 0 6px;font-weight:950;letter-spacing:-.01em}
    .mini-desc{margin:0;color:rgba(11,18,32,.72);font-weight:650}

    .empty{padding:22px;border:1px dashed rgba(11,18,32,.18);border-radius:18px;background:rgba(11,18,32,.02)}
    .empty h3{margin:0 0 6px}

    .toc{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:10px;
      margin-top:10px;
    }
    @media (max-width:640px){.toc{grid-template-columns:1fr}}
    .toc a{
      display:flex;align-items:center;justify-content:space-between;
      gap:12px;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(11,18,32,.10);
      background:rgba(11,18,32,.02);
      text-decoration:none;
      color:inherit;
      font-weight:900;
    }
    .toc a:hover{border-color:rgba(22,163,74,.25);background:rgba(22,163,74,.06)}
    .kbd{font-weight:950;color:rgba(11,18,32,.55)}
  </style>
</head>

<body>
  <div id="siteHeader"></div>

  <main class="recipe">
    <div class="container">
      <header class="recipe-head">
        <h1 class="recipe-title">Sprøde ristede kikærter</h1>
        <p class="recipe-sub">
          Sprøde ristede kikærter er en af de nemmeste sunde snacks, når du vil have noget sprødt og salt, men stadig holde det “rent”.
          Du får en snack med godt proteinindhold og fibre, som mætter mere end chips og ofte ender med at blive et fast hit i køkkenet.
          Opskriften her er lavet, så du kan vælge mellem ovn og airfryer, uden at du skal slå noget op andre steder.
          Når du først har styr på tricket med at tørre kikærterne ordentligt, er det en af de mest taknemmelige snacks at lave.
        </p>
      </header>

      <section class="recipe-top">
        <!-- LEFT: Recipe image (from JSON) -->
        <figure class="recipe-photo">
          <img id="recipeImage" src="/assets/images/hero.jpg" alt="Sprøde ristede kikærter – sund snack" loading="eager" />
        </figure>

        <!-- RIGHT: Meta + Save + Nutrition -->
        <aside class="cardx">
          <div class="meta-pills" aria-label="Hurtigt overblik">
            <span class="pill">Tid: <strong id="metaMinutes">25 min</strong></span>
            <span class="pill">Portioner: <strong id="metaServings">2</strong></span>
            <span class="pill">Niveau: <strong id="metaLevel">Nem</strong></span>
            <span class="pill">Protein: <strong>Høj</strong></span>
          </div>

          <button
            class="save-btn"
            type="button"
            data-save-recipe
            data-title="Sprøde ristede kikærter"
            data-url="/opskrifter/sproede-ristede-kikaerter.html"
            data-image="/assets/images/hero.jpg"
            aria-pressed="false">
            <svg class="heart" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 21s-7-4.35-9.33-8.03C.5 9.5 2.28 5.5 6.5 5.5c2.03 0 3.57 1.1 4.5 2.2 0.93-1.1 2.47-2.2 4.5-2.2 4.22 0 6 4 3.83 7.47C19 16.65 12 21 12 21z"></path>
            </svg>
            <span id="saveLabel">Gem opskrift</span>
          </button>

          <h2 style="margin-top:16px;">Næringsindhold</h2>
          <p>
            Beregnet pr. <strong>portion</strong>. Tal er vejledende og afhænger af mærker.
            Kikærter er naturligt rige på både protein og fibre, og derfor fungerer de ekstra godt som “sprød snack”, der faktisk mætter.
          </p>

          <div class="nutri" id="nutriGrid">
            <span class="pill">Kcal <strong>–</strong></span>
            <span class="pill">Protein <strong>–</strong></span>
            <span class="pill">Kulhydrat <strong>–</strong></span>
            <span class="pill">Fedt <strong>–</strong></span>
          </div>

          <h3 style="margin-top:16px;">Hurtig navigation</h3>
          <div class="toc" aria-label="Gå direkte til sektion">
            <a href="#ingredienser">Ingredienser <span class="kbd">↘</span></a>
            <a href="#ovn">Ovn-metode <span class="kbd">↘</span></a>
            <a href="#airfryer">Airfryer-metode <span class="kbd">↘</span></a>
            <a href="#tips">Tips og varianter <span class="kbd">↘</span></a>
          </div>
        </aside>
      </section>

      <section class="recipe-grid" style="display:grid;grid-template-columns:1.1fr .9fr;gap:18px;margin-top:18px">
        <article class="cardx">
          <h2 id="ingredienser">Ingredienser</h2>
          <p>
            Opskriften er lavet med få, simple ting. Du kan holde den klassisk med paprika og hvidløg, eller du kan variere smagen alt efter humør.
            Hvis du vil have “chips-feel”, så vælg en røget paprika og lidt ekstra salt. Hvis du vil have en mere mild snack, så hold krydderierne bløde og varme.
          </p>
          <ul class="list">
            <li>1 dåse kikærter (ca. 240 g drænet)</li>
            <li>1 spsk olivenolie</li>
            <li>1 tsk paprika (gerne røget)</li>
            <li>½ tsk hvidløgspulver</li>
            <li>½ tsk salt</li>
            <li>Evt. ½ tsk spidskommen, chili eller karry (valgfrit)</li>
          </ul>

          <h2 style="margin-top:16px;">Forberedelse</h2>
          <p>
            Her er hele hemmeligheden bag sprøde kikærter: <strong>tørhed</strong>.
            Hvis kikærterne er våde, damper de i stedet for at blive ristede, og så ender de mere “bløde” end sprøde.
            Brug derfor 2–3 minutter ekstra på at duppe dem grundigt tørre. Det betaler sig hver gang.
          </p>
          <ol class="list">
            <li>Hæld kikærterne i en si og skyl dem grundigt.</li>
            <li>Dup dem helt tørre i et rent viskestykke eller køkkenrulle.</li>
            <li>Fjern gerne løse skaller. Det er valgfrit, men giver en mere ensartet sprødhed.</li>
            <li>Vend kikærterne i olie og krydderier i en skål, så alt er dækket.</li>
          </ol>

          <h2 id="ovn" style="margin-top:16px;">Sådan gør du – ovn</h2>
          <p>
            Ovn-metoden er god, hvis du laver en lidt større portion eller vil have en meget jævn ristning.
            Brug varmluft og ryst undervejs, så de ikke kun rister på den ene side. Når de er færdige, skal de gerne lyde “tørre” og let raslende.
          </p>
          <ol class="list">
            <li>Forvarm ovnen til <strong>200 °C varmluft</strong>.</li>
            <li>Fordel kikærterne i ét lag på en bageplade med bagepapir.</li>
            <li>Bag i <strong>22–30 minutter</strong>, afhængigt af ovn og hvor sprøde du vil have dem.</li>
            <li>Ryst pladen efter ca. 10 minutter og igen mod slutningen, så de rister jævnt.</li>
            <li>Tag ud og lad dem køle 5 minutter. De bliver ofte mere sprøde, når de køler lidt af.</li>
          </ol>

          <h2 id="airfryer" style="margin-top:16px;">Sådan gør du – airfryer</h2>
          <p>
            Airfryer er genial, når du vil have snack hurtigt. Fordelen er, at du typisk får sprødhed på kortere tid.
            Ulempen er, at du skal ryste kurven et par gange for at få en jævn ristning. Hvis de virker lidt bløde, så giv dem 2 minutter ekstra.
          </p>
          <ol class="list">
            <li>Forvarm gerne airfryer i 2 minutter (valgfrit, men giver bedre start på sprødhed).</li>
            <li>Tilbered ved <strong>190 °C i 12–16 minutter</strong>.</li>
            <li>Ryst kurven efter 5 minutter og igen 2–3 gange frem til slut.</li>
            <li>Smag til når de er færdige. De skal være sprøde udenpå og let tørre.</li>
            <li>Lad dem køle 3–5 minutter før servering.</li>
          </ol>

          <h2 style="margin-top:16px;">Serveringsforslag</h2>
          <p>
            De sprøde kikærter kan spises som de er, men de fungerer også vildt godt som “topping”.
            Prøv dem på en salat, i en wrap eller ovenpå en skål med grønt og dip. Det giver crunch og gør en let snack mere tilfredsstillende.
          </p>
          <ul class="list">
            <li>Som snack i en skål med citronbåd og lidt ekstra salt.</li>
            <li>Som topping på salat for ekstra crunch.</li>
            <li>I en madpakke i en lille beholder (bedst samme dag).</li>
            <li>Med dip som tzatziki eller hummus.</li>
          </ul>
        </article>

        <aside class="cardx">
          <h2 id="tips">Tips og varianter</h2>
          <p>
            Her kan du virkelig gøre opskriften til din egen. Start med basis, og byg derefter på.
            Hvis du bruger krydderier, der let brænder (fx sukker eller meget fint hvidløgspulver), så tilsæt dem mod slutningen eller brug lavere varme.
          </p>
          <ul class="list">
            <li><strong>Mexicansk:</strong> paprika + spidskommen + chili + et nip oregano.</li>
            <li><strong>Karri:</strong> karry + gurkemeje + lidt salt (super god “varm” snack).</li>
            <li><strong>BBQ:</strong> røget paprika + løgpulver + en anelse sødme (fx lidt honning efter tilberedning).</li>
            <li><strong>Citron:</strong> finrevet citronskal + lidt sort peber efter tilberedning.</li>
            <li><strong>Ekstra sprød:</strong> tør dem længe, og undgå at overfylde plade/kurv.</li>
          </ul>

          <h2 style="margin-top:16px;">Fejlfinding</h2>
          <p>
            Hvis dine kikærter ikke bliver sprøde, er det næsten altid en af de her ting.
            Tjek listen én gang, og så rammer du sprødheden næste gang uden problemer.
          </p>
          <ul class="list">
            <li><strong>For våde kikærter:</strong> dup dem tørre længere.</li>
            <li><strong>For tæt lag:</strong> de skal ligge i ét lag, især i airfryer.</li>
            <li><strong>For kort tid:</strong> giv 2–4 minutter ekstra og ryst oftere.</li>
            <li><strong>Forkert temperatur:</strong> for lav varme giver mere “tørring” end ristning.</li>
          </ul>

          <h2 style="margin-top:16px;">Opbevaring</h2>
          <p>
            De er bedst samme dag. Hvis du gemmer dem, kan de miste sprødhed, fordi de trækker fugt.
            Du kan dog sagtens “redde” dem ved at give dem 2–4 minutter i airfryer eller ovn igen.
            Opbevar dem i en bøtte med låg, men undgå at lukke helt tæt, hvis de stadig er lune.
          </p>
        </aside>
      </section>

      <section class="cardx" style="margin-top:18px;">
        <h2>Konklusion</h2>
        <p>
          Sprøde ristede kikærter er en af de snacks, der hurtigt føles som et hack i hverdagen.
          Du bruger få ingredienser, det tager kort tid, og du kan skrue smagen præcis derhen, hvor du bedst kan lide den.
          Når du først har styr på at tørre kikærterne og ryste undervejs, får du en stabil, sprød snack igen og igen.
          Perfekt, når du vil have noget salt og sprødt, men stadig holde det sundt.
        </p>
      </section>

      <section class="related-wrap">
        <h2 style="margin:0;font-size:1.2rem;font-weight:950;letter-spacing:-.01em;">Relaterede opskrifter</h2>
        <p class="muted" style="margin:6px 0 0;color:rgba(11,18,32,.68);font-weight:650;">
          Vi finder automatisk opskrifter med samme kategorier eller tags.
        </p>
        <div id="relatedGrid" class="related-grid"></div>
      </section>
    </div>
  </main>

  <div id="siteFooter"></div>

  <script>
    // Partials
    async function loadPartial(mountId, url) {
      const el = document.getElementById(mountId);
      if (!el) return;
      try {
        const res = await fetch(url, { cache: "no-store" });
        el.innerHTML = await res.text();
      } catch {}
    }
    loadPartial("siteHeader", "/partials/header.html");
    loadPartial("siteFooter", "/partials/footer.html");

    // Load recipe from opskrifter.json to set correct image + nutrition + schema + related
    (async () => {
      const SLUG = "sproede-ristede-kikaerter";
      let recipe = null;

      try {
        const res = await fetch("/assets/opskrifter.json", { cache: "no-store" });
        const data = await res.json();
        const list = Array.isArray(data) ? data : (data.recipes || []);
        recipe = (list || []).find(x => x && x.id === SLUG) || null;

        // If URL is used instead of id as fallback
        if (!recipe) {
          recipe = (list || []).find(x => x && x.url && x.url.includes("sproede-ristede-kikaerter")) || null;
        }

        // Apply image
        const img = document.getElementById("recipeImage");
        const ogImg = document.querySelector('meta[property="og:image"]');
        if (img) {
          const src = recipe && recipe.image ? recipe.image : "/assets/images/hero.jpg";
          img.src = src;
          img.alt = (recipe && recipe.title ? recipe.title : "Sprøde ristede kikærter") + " – sund snack";
        }
        if (ogImg && recipe && recipe.image) {
          ogImg.setAttribute("content", "https://www.sund-snack.dk" + recipe.image);
        }

        // Update save button data-image (so saved drawer shows correct thumbnail)
        const saveBtn = document.querySelector("[data-save-recipe]");
        if (saveBtn && recipe && recipe.image) {
          saveBtn.setAttribute("data-image", recipe.image);
        }
        if (saveBtn && recipe && recipe.title) {
          saveBtn.setAttribute("data-title", recipe.title);
        }
        if (saveBtn && recipe && recipe.url) {
          saveBtn.setAttribute("data-url", recipe.url);
        }

        // Meta minutes/level/servings
        const mm = document.getElementById("metaMinutes");
        const ml = document.getElementById("metaLevel");
        const ms = document.getElementById("metaServings");
        if (mm && recipe && recipe.minutes) mm.textContent = recipe.minutes + " min";
        if (ml && recipe && recipe.level) ml.textContent = recipe.level;
        if (ms && recipe && recipe.servings) ms.textContent = recipe.servings;

        // Nutrition UI
        const nutriGrid = document.getElementById("nutriGrid");
        const n = recipe && recipe.nutrition ? recipe.nutrition : null;
        if (nutriGrid && n) {
          nutriGrid.innerHTML = `
            <span class="pill">Kcal <strong>${n.calories ?? "–"}</strong></span>
            <span class="pill">Protein <strong>${n.protein ?? "–"} g</strong></span>
            <span class="pill">Kulhydrat <strong>${n.carbohydrates ?? "–"} g</strong></span>
            <span class="pill">Fedt <strong>${n.fat ?? "–"} g</strong></span>
          `;
        }

        // Inject Recipe schema (uses correct image + nutrition)
        const schemaEl = document.getElementById("recipeSchema");
        const imgAbs = (recipe && recipe.image)
          ? ("https://www.sund-snack.dk" + recipe.image)
          : "https://www.sund-snack.dk/assets/images/hero.jpg";

        const dateISO = "2026-02-06";

        const schema = {
          "@context":"https://schema.org",
          "@type":"Recipe",
          "@id":"https://www.sund-snack.dk/opskrifter/sproede-ristede-kikaerter.html#recipe",
          "mainEntityOfPage":"https://www.sund-snack.dk/opskrifter/sproede-ristede-kikaerter.html",
          "name":"Sprøde ristede kikærter",
          "description":"Sprøde ristede kikærter – nem og sund snack med højt proteinindhold. Kan laves i ovn eller airfryer. Inkl. næringsindhold, tips og smagsvarianter.",
          "image":[imgAbs],
          "author":{"@type":"Organization","name":"Sund Snack"},
          "publisher":{"@type":"Organization","name":"Sund Snack"},
          "datePublished":dateISO,
          "dateModified":dateISO,
          "inLanguage":"da-DK",
          "prepTime":"PT7M",
          "cookTime":"PT18M",
          "totalTime":"PT25M",
          "recipeYield": (recipe && recipe.servings) ? (String(recipe.servings) + " portioner") : "2 portioner",
          "recipeCategory": (recipe && recipe.categories) ? recipe.categories : ["snacks"],
          "keywords": (recipe && recipe.tags) ? recipe.tags.join(", ") : "kikærter, sprød snack, sund snack, protein",
          "recipeIngredient":[
            "1 dåse kikærter (ca. 240 g drænet)",
            "1 spsk olivenolie",
            "1 tsk paprika (gerne røget)",
            "1/2 tsk hvidløgspulver",
            "1/2 tsk salt",
            "Evt. spidskommen, chili eller karry (valgfrit)"
          ],
          "recipeInstructions":[
            {
              "@type":"HowToSection",
              "name":"Forberedelse",
              "itemListElement":[
                {"@type":"HowToStep","text":"Skyl kikærterne grundigt i en si."},
                {"@type":"HowToStep","text":"Dup kikærterne helt tørre i viskestykke eller køkkenrulle."},
                {"@type":"HowToStep","text":"Vend kikærterne med olie og krydderier, så de er jævnt dækket."}
              ]
            },
            {
              "@type":"HowToSection",
              "name":"Ovn",
              "itemListElement":[
                {"@type":"HowToStep","text":"Forvarm ovnen til 200 °C varmluft."},
                {"@type":"HowToStep","text":"Fordel kikærterne i ét lag på bageplade med bagepapir."},
                {"@type":"HowToStep","text":"Bag 22–30 minutter og ryst pladen undervejs."},
                {"@type":"HowToStep","text":"Lad kikærterne køle 5 minutter, så de bliver endnu mere sprøde."}
              ]
            },
            {
              "@type":"HowToSection",
              "name":"Airfryer",
              "itemListElement":[
                {"@type":"HowToStep","text":"Tilbered ved 190 °C i 12–16 minutter."},
                {"@type":"HowToStep","text":"Ryst kurven 2–3 gange undervejs for jævn ristning."},
                {"@type":"HowToStep","text":"Lad kikærterne køle 3–5 minutter før servering."}
              ]
            }
          ]
        };

        if (n) {
          schema.nutrition = {
            "@type":"NutritionInformation",
            "calories": (n.calories != null ? String(n.calories) : "") + " kcal",
            "proteinContent": (n.protein != null ? String(n.protein) : "") + " g",
            "carbohydrateContent": (n.carbohydrates != null ? String(n.carbohydrates) : "") + " g",
            "fatContent": (n.fat != null ? String(n.fat) : "") + " g"
          };
        }

        if (schemaEl) schemaEl.textContent = JSON.stringify(schema);

        // Related recipes (shared cats/tags)
        const relatedGrid = document.getElementById("relatedGrid");
        if (relatedGrid) {
          const currentCats = new Set(((recipe && recipe.categories) || []).map(x => String(x).toLowerCase()));
          const currentTags = new Set(((recipe && recipe.tags) || []).map(x => String(x).toLowerCase()));

          function score(item){
            const cats = new Set((item.categories || []).map(x => String(x).toLowerCase()));
            const tags = new Set((item.tags || []).map(x => String(x).toLowerCase()));
            let s = 0;
            currentCats.forEach(c => { if (cats.has(c)) s += 3; });
            currentTags.forEach(t => { if (tags.has(t)) s += 2; });
            return s;
          }

          const related = (list || [])
            .filter(x => x && x.url && (!recipe || x.id !== recipe.id))
            .map(x => ({...x, _score: score(x)}))
            .filter(x => x._score > 0)
            .sort((a,b) => b._score - a._score)
            .slice(0, 3);

          if (!related.length) {
            relatedGrid.innerHTML = `
              <div class="empty" style="grid-column:1/-1">
                <h3>Ingen relaterede opskrifter endnu</h3>
                <p class="muted">Tilføj 2–3 sunde snacks mere i opskrifter.json, så viser vi dem automatisk her.</p>
              </div>
            `;
          } else {
            relatedGrid.innerHTML = related.map(r => `
              <article class="mini-card">
                <a class="card-link" href="${r.url}">
                  <div class="mini-thumb" style="background-image:url('${r.image || ""}')"></div>
                  <div class="mini-body">
                    <h3 class="mini-title">${r.title || "Opskrift"}</h3>
                    <p class="mini-desc">${r.description || ""}</p>
                  </div>
                </a>
              </article>
            `).join("");
          }
        }
      } catch (e) {
        // fail silently
      }

      // Save button UI feedback – mirror site.js storage (aria-pressed -> red heart)
      const saveBtn = document.querySelector("[data-save-recipe]");
      const saveLabel = document.getElementById("saveLabel");

      function syncSavedUI(){
        if (!saveBtn) return;
        const pressed = saveBtn.getAttribute("aria-pressed") === "true";
        saveBtn.classList.toggle("is-saved", pressed);
        if (saveLabel) saveLabel.textContent = pressed ? "Gemt" : "Gem opskrift";
      }

      // initial sync (site.js sets aria-pressed)
      setTimeout(syncSavedUI, 60);
      document.addEventListener("ss:saved-updated", () => setTimeout(syncSavedUI, 0));

      // also sync right after clicking
      document.addEventListener("click", (e) => {
        if (!e.target.closest("[data-save-recipe]")) return;
        setTimeout(syncSavedUI, 0);
      });
    })();
  </script>
</body>
</html>
